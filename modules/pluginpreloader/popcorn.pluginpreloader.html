<!DOCTYPE html>
<html>
<head>
  <title>Popcorn plugin preloader Demo</title>
  <script src="../../popcorn.js"></script>
  <script src="popcorn.pluginpreloader.js"></script>
  <script src="../../plugins/image/popcorn.image.js"></script>
  <script>
    document.addEventListener( "DOMContentLoaded", function() {

      var p = Popcorn( "#video" )
      .volume( 0 )
      .play()
      .pluginPreloader( "image", {
          // seconds
          start: 10,
          // seconds
          end: 20,
          href: "http://www.drumbeat.org/",
          text: "DRUMBEAT",
          target: "imagediv"
        },
        {
            src: "https://www.drumbeat.org/media//images/drumbeat-logo-splash.png",
            time: 5
        }
      );
      // get image TrackEvent ID
      var id = p.data.trackEvents.byEnd[2]._id;
      p.cue( 3, function() {
        // Seek Past preload exec (5 seconds)
        // The start method for image now has a simple check to see if the preload
        // was executed already, and will execute it if necessary. Either way, the
        // preload callback can only happen once.
        this.currentTime( 8 );
      })
      .cue( 15, function(){
        // trigger remove of the image event, this will also remove the related
        // "cue" event, created using the preloader
        this.removeTrackEvent( id );
      });
    }, false);

  </script>
</head>
<body>
  <h1 id="qunit-header">Popcorn Image Plug-in Demo</h1>
  <p> Two images will appear at 5 seconds.</p>
  <p> First one (with an overlayed text) will disappear at 15 seconds.</p>
  <p> Second one (without an overlayed text) will disappear at 45 seconds.</p>
  <div>
    <video id="video"
      controls
      width="250px"
      poster="../../test/poster.png">

      <source id="mp4"
        src="../../test/trailer.mp4"
        type='video/mp4; codecs="avc1, mp4a"'>

      <source id="ogv"
        src="../../test/trailer.ogv"
        type='video/ogg; codecs="theora, vorbis"'>

      <p>Your user agent does not support the HTML5 Video element.</p>

    </video>
  </div>
  <div style="width:400px; height:400px" id="imagediv">
  </div>

</body>
</html>
